<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
    <script>
        var app = angular.module('myApp', []);
        app.controller('SuperCtrl', function($scope, $http, $timeout) {
            $scope.getData = function() {
                $http.get("https://spreadsheets.google.com/feeds/list/1tJllDysWV5Xn9C7MKlVDttPXp2jXuQCYLP3jbf4FW28/od6/public/values?alt=json").success(function(response) {
                    $scope.locations = response.feed.entry;
                    var rowLength = $scope.locations.length;
                    var townsFirst = [];
                    var townsSecond = [];
                    for (var i = 0; i < rowLength; i++) {
                        if ($scope.locations[i].gsx$townsak.$t !== "") {
                            townsFirst.push(`${$scope.locations[i].gsx$townsak.$t}: ${$scope.locations[i].gsx$locations1.$t}`);
                        }
                        if ($scope.locations[i].gsx$townslz.$t !== "") {
                            townsSecond.push(`${$scope.locations[i].gsx$townslz.$t}: ${$scope.locations[i].gsx$locations2.$t}`);
                        }

                    }
                    $scope.towns = townsFirst.concat(townsSecond);
                });
            }
            $scope.interval = function() {
                $timeout(function() {
                    $scope.getData();
                    $scope.interval();
                }, 5000)
            };
            $scope.getData();
            $scope.interval();
        });
    </script>
</head>

<body ng-app="myApp" ng-controller="SuperCtrl">
    <a href="https://docs.google.com/spreadsheets/d/1tJllDysWV5Xn9C7MKlVDttPXp2jXuQCYLP3jbf4FW28/edit#gid=0"><button>Live spreadsheet</button></a>
    <ul class="collection">
        <li class="collection-item" ng-repeat="x in towns">{{x}}</li>
    </ul>
</body>

</html>
